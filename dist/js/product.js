"use strict";require(["config"],function(){require(["jquery","header","footer","template","jquerycookie"],function(l,t,o,i,c){l("header").load("/html/component/header.html",function(){t.init()}),l("footer").load("/html/component/footer.html",function(){o.init()});var e=location.search.slice(1).split("="),s={};s[e[0]]=e[1],l.ajax({method:"post",url:"http://localhost/data/api/product.php",data:s,dataType:"json",async:!0,success:function(c){if(1===c.code){console.log(c.products);var t=i("pic-template",{products:c.products});l(".pro").html(t)}var e=l(".box"),s=l("#fdj"),r=l(".big"),n=l(".bigImg");e.mousemove(function(t){var o=t.pageX-e.offset().left-s.width()/2,i=t.pageY-e.offset().top-s.height()/2;o<0&&(o=0),i<0&&(i=0),o>e.width()-s.width()&&(o=e.width()-s.width()),i>e.height()-s.height()&&(i=e.height()-s.height()),s.css({left:o,top:i,display:"block"}),r.css({display:"block"}),n.css({left:-2*o,top:-2*i,display:"block"})}),e.mouseleave(function(t){r.css({display:"none"}),s.css({display:"none"})}),l(".imgList").find("img").click(function(t){var o=l(this).attr("src");console.log(l(this).attr("src")),l(this).attr("src",l(".box img").attr("src")),l(".box img").attr("src",o),l(".big img").attr("src",o)}),console.log(l(".proright")),console.log(111),l("#btn-").click(function(){var t=l("#num").val();t-1==0?t=1:t--,l("#num").val(t)}),l("#btnplus").click(function(){var t=l("#num").val();t++,l("#num").val(t)});var a=[],o=l.cookie("cart");o&&(a=JSON.parse(o)),l("#cart").click(function(){for(var t=0;t<a.length;t++)if(console.log(a),a[t].id==c.products[0].id){a[t].num++;break}if(t===a.length){var o={id:c.products[0].id,name:c.products[0].description,price:c.products[0].nowprice,img:c.products[0].image,num:l("#num").val()};a.push(o)}console.log(a);var i=JSON.stringify(a);console.log(i),l.cookie("cart",i,{path:"/",expires:7})})}})})});